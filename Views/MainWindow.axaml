<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Trabajo_Individual.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="Trabajo_Individual.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Trabajo_Individual">

  <Design.DataContext>
    <vm:MainWindowViewModel/>
</Design.DataContext>

<Grid ColumnDefinitions="2*,3*" RowDefinitions="*">
    <!-- Formulario -->
    <Border Margin="15"
            CornerRadius="12"
            Padding="20"
            Background="#FAFAFA"
            BorderBrush="#CCC"
            BorderThickness="1">
            
        <StackPanel Spacing="10">
            <TextBlock Text="Nueva Tarea"
                       FontSize="18"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Foreground="#6A0DAD"/>

            <ComboBox 
                Width="250"
                HorizontalAlignment="Center"
                SelectedItem="{Binding Tarea.Categoria}"
                ItemsSource="{Binding ListarCategorias}"
             />

            <TextBox 
                Width="250"
                HorizontalAlignment="Center"
                Watermark="Escribe la tarea"
                Text="{Binding Tarea.Descripcion, Mode=TwoWay}"/>

            <CalendarDatePicker 
                Width="250"
                HorizontalAlignment="Center"
                Watermark="Selecciona fecha lÃ­mite"
                SelectedDate="{Binding Tarea.FechaLimite, Mode=TwoWay}"/>

            <TextBlock Text="{Binding Mensaje}"
                       Foreground="DarkMagenta"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Margin="5"/>

            <!-- Opciones avanzadas -->
            <StackPanel Orientation="Horizontal" 
                        IsVisible="{Binding Avanzadas}"
                        HorizontalAlignment="Center"
                        Spacing="8">
                <TextBox Width="100" Watermark="Dato extra 1"/>
                <TextBox Width="120" Watermark="Dato extra 2"/>
            </StackPanel>

            <CheckBox 
                Content="Aceptar todas las condiciones"
                IsChecked="{Binding AceptarCondiciones}"
                Margin="10"
                HorizontalAlignment="Center"/>

            <!-- Botones -->
            <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                <Button Width="100"
                        Content="Crear"
                        Background="PaleVioletRed"
                        Foreground="White"
                        Command="{Binding MostrarTareaCommand}"/>
                
                <Button Width="100"
                        IsVisible="{Binding ModoEditar}"
                        Content="Editar"
                        Background="Plum"
                        Foreground="White"
                        Command="{Binding EditarTareaCommand}"/>
                
                <Button Width="100"
                        IsVisible="{Binding ModoEditar}"
                        Content="Cancelar"
                        Background="Gray"
                        Foreground="White"
                        Command="{Binding CancelarCommand}"/>
            </StackPanel>
        </StackPanel>
    </Border>

    <!--  Listado de tareas -->
    <Border Grid.Column="1"
            Margin="15"
            CornerRadius="12"
            Padding="15"
            Background="White"
            BorderBrush="#CCC"
            BorderThickness="1">
            
        <StackPanel>
            <TextBlock Text="Tareas Creadas"
                       FontSize="18"
                       FontWeight="Bold"
                       Margin="0 0 0 10"
                       Foreground="#6A0DAD"
                       HorizontalAlignment="Center"/>

            <ListBox Background="#F3E5F5"
                     BorderThickness="0"
                     CornerRadius="8"
                     SelectedItem="{Binding TareaSeleccionada}"
                     ItemsSource="{Binding Tareas}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Margin="5" Padding="8"
                                CornerRadius="8"
                                Background="White">
                                
                            <StackPanel>
                                <Image Width="50" Source="avares://Trabajo_Individual/Assets/tarea.jpg"/>
                                <TextBlock Text="{Binding Categoria}" FontWeight="Bold" Foreground="#6A0DAD"/>
                                <TextBlock Text="{Binding Descripcion}" Foreground="#333"/>
                                <TextBlock Text="{Binding FechaLimite, StringFormat='dd/MM/yyyy'}" Foreground="DarkSlateGray"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </Border>
</Grid>
</Window>